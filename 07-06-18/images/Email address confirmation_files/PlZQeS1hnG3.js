if (self.CavalryLogger) { CavalryLogger.start_js(["yz+Sw"]); }

__d("ComposerXContextConfig",[],(function(a,b,c,d,e,f){e.exports={propertyNames:{actorID:"ACTOR_ID",postID:"POST_ID"},propertyValues:{ACTOR_ID:"actorID",POST_ID:"postID"}}}),null);
__d("FormSubmit",["AsyncRequest","AsyncResponse","CSS","DOMQuery","Event","Form","Parent","trackReferrer"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){__p&&__p();var o={buildRequest:function(a,b){__p&&__p();var c=(l.getAttribute(a,"method")||"GET").toUpperCase();b=b&&m.byTag(b,"button")||b;var d=b&&m.byClass(b,"stat_elem")||a;if(i.hasClass(d,"async_saving"))return null;if(b&&(b.form!==a||b.nodeName!="INPUT"&&b.nodeName!="BUTTON"||b.type!="submit")){var e=j.scry(a,".enter_submit_target")[0];e&&(b=e)}e=l.serialize(a,b);l.setDisabled(a,!0);b=l.getAttribute(a,"ajaxify")||l.getAttribute(a,"action");var f=!!l.getAttribute(a,"data-cors");n(a,b);return new g().setAllowCrossOrigin(f).setURI(b).setData(e).setNectarModuleDataSafe(a).setReadOnly(c=="GET").setMethod(c).setRelativeTo(a).setStatusElement(d).setInitialHandler(l.setDisabled.bind(null,a,!1)).setHandler(function(b){k.fire(a,"success",{response:b})}).setErrorHandler(function(b){k.fire(a,"error",{response:b})!==!1&&h.defaultErrorHandler(b)}).setFinallyHandler(l.setDisabled.bind(null,a,!1))},send:function(a,b){a=o.buildRequest(a,b);a&&a.send();return a}};e.exports=o}),null);
__d("ComposerXAttachmentBootstrap",["CSS","Form","FormSubmit","Parent","URI","csx","cx"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m){__p&&__p();var n=[],o={bootstrap:function(a){o.load(j.byTag(a,"form"),a.getAttribute("data-endpoint"))},load:function(a,b,c){b=new k(b).addQueryData({composerurihash:o.getURIHash(b)});g.conditionClass(a,"_fu",c);c=j.bySelector(a,"._2_4");g.removeClass(c,"async_saving");h.setDisabled(a,!1);a.action=b.toString();i.send(a)},getURIHash:function(a){if(a==="initial")return"initial";var b=n.indexOf(a);if(b!==-1)return b+"";else{b=n.length;n[b]=a;return b+""}}};e.exports=o}),null);
__d("ComposerXContext",["ComposerXContextConfig","invariant"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i=function(a){return g.propertyNames[a]};function a(a){"use strict";this.$1={};for(var b in a)this.setProperty(b,a[b])}a.prototype.getProperty=function(a){"use strict";i(a)||h(0);return this.$1[a]};a.prototype.setProperty=function(a,b){"use strict";i(a)||h(0);this.$1[a]=b;return this};a.PROPERTIES=g.propertyValues;e.exports=a}),null);
__d("ComposerXSessionIDInserter",["ComposerXSessionIDs","DOM","DOMQuery","Event","Parent","csx","onEnclosingPageletDestroy"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m){__p&&__p();var n={init:function(a){var b=j.listen(a,"submit",n._onSubmit);m(a,function(){b.remove()})},_onSubmit:function(a){n.insertSessionInput(a.getTarget())},insertSessionInput:function(a){var b=k.bySelector(a,"._119");if(!b)return;b=g.getSessionID(b.id);if(!b)return;var c=i.scry(a,"._5r_b")[0];!c?h.prependContent(a,g.createSessionIDInput(b)):c.value=b}};e.exports=n}),null);
__d("ComposerX",["ActorURI","Arbiter","ComposerXAttachmentBootstrap","ComposerXContext","ComposerXMarauderLogger","ComposerXSessionIDInserter","ComposerXSessionIDs","ComposerXStore","CSS","DOM","DOMQuery","PrivacyConst","PrivacySelector","PrivacySelectorNewDispatcher","SubscriptionsHandler","URI","csx","cx","getObjectValues","removeFromArray"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){__p&&__p();var A="any";function a(a){"use strict";this._root=a,this._composerID=a.id,this._attachments={},this._context=new j({}),m.resetSessionID(this._composerID),l.init(this._root),this._subscriptionsHandler=new u(),this._subscriptionsHandler.addSubscriptions(h.subscribe(["composer/publish","composer/close"],function(b,c){if(c.composer_id===this._composerID){this.reset();b=q.scry(a,".hidden_target_specs");b&&b.length&&b.forEach(p.remove);h.inform("composer/publishDone",c)}}.bind(this))),this._subscriptionsHandler.addSubscriptions.apply(this._subscriptionsHandler,k.listenForPostEvents(this._composerID,this._getContent())),this._attachmentFetchForm=q.find(a,"._2_4"),h.inform("composer/ready",{},h.BEHAVIOR_STATE)}a.prototype.getAttachment=function(a,b,c,d){"use strict";a=this._augmentURI(a);var e=i.getURIHash(a);this._endpointHashToShow=e;var f=this._attachments[e];f&&!d?this._showAttachmentAfterComponentsLoaded(e,c):this.fetchAttachmentData(a,b,d)};a.prototype.fetchAttachmentData=function(a,b,c){"use strict";a=this._augmentURI(a);var d=i.getURIHash(a);if(this._attachments[d]&&!c)return;this._currentFetchEndpoints.includes(d)||(i.load(this._attachmentFetchForm,a,b),this._currentFetchEndpoints.push(d))};a.prototype.setAttachment=function(a,b,c,d){"use strict";z(this._currentFetchEndpoints,a),this._setupAttachment(a,b,c,d),this._showAttachmentAfterComponentsLoaded(a,!1)};a.prototype.setInitialAttachment=function(a,b,c,d,e){"use strict";e&&(this._context=e);a=this._augmentURI(a);e=i.getURIHash(a);this._setupAttachment(e,b,c,d);this._initialAttachmentEndpoint=a;this._currentInstance||this._showAttachmentAfterComponentsLoaded(e,!0)};a.prototype.setComponent=function(a,b){"use strict";n.get(this._composerID,a)||(n.set(this._composerID,a,b),p.appendContent(this._attachmentFetchForm,p.create("input",{type:"hidden",name:"loaded_components[]",value:a})))};a.prototype.reset=function(){"use strict";__p&&__p();this._currentInstance&&(this._currentInstance.cleanup(),this._currentInstance=null);m.resetSessionID(this._composerID);for(var a in this._attachments)this._attachments[a].instance.reset();var b=n.getAllForComposer(this._composerID);y(b).forEach(function(a){a.reset&&a.reset(a)});b=s.getAdamaSelectorInstance(p.scry(this._root,"div._1lo2")[0]);var c=n.get(this._composerID,"mainprivacywidget");c=c&&c.instance&&c.instance.getInstance();b?c.setInstance(b):b=c&&c.getInstance();b&&b.shouldReplaceOnPost()&&t.handleUpdateFromSelector({selector_type:r.PrivacyField.CURRENT_COMPOSER.toString(),post_param:"",unique_id:"_reloadStickySelectors",reload:!0});this.getAttachment(this._initialAttachmentEndpoint,!1,!0);h.inform("composer/reset")};a.prototype.destroy=function(){"use strict";this._subscriptionsHandler.release()};a.prototype.addPlaceholders=function(a,b){"use strict";__p&&__p();var c;for(var d in this._attachments){c=this._attachments[d];if(c.instance===a){b.forEach(function(a){c.placeholders.push(a),c.required_components.push(a.component_name)});break}}this._currentInstance===a&&this._fillPlaceholders(b)};a.prototype.hasAttachmentWithClassName=function(a){"use strict";return q.scry(this._root,"."+a).length>0};a.prototype.showAttachmentThrobber=function(){"use strict";o.addClass(this._attachmentFetchForm,"async_saving")};a.prototype.hideAttachmentThrobber=function(){"use strict";o.removeClass(this._attachmentFetchForm,"async_saving")};a.prototype.getContext=function(){"use strict";return this._context};a.prototype.getID=function(){"use strict";return this._composerID};a.prototype._setupAttachment=function(a,b,c,d){"use strict";b.setComposerID(this._composerID);this._attachments[a]={instance:b,placeholders:c,required_components:d};a=this._getContent();c=b.getRoot();c.parentNode!==a&&(o.hide(c),p.appendContent(a,c))};a.prototype._getContent=function(){"use strict";return q.find(this._root,"div._55d0")};a.prototype._showAttachment=function(a,b,c,d){"use strict";__p&&__p();if(this._currentInstance===a)return;if(this._endpointHashToShow===A)this._endpointHashToShow=null;else if(this._endpointHashToShow!==b)return;if(this._currentInstance){if(!this._currentInstance.canSwitchAway())return;this._currentInstance.cleanup()}this._currentInstance=a;b=this._getContent().childNodes;var e=a.getRoot();for(var f=0;f<b.length;f++)b[f]!==e&&o.hide(b[f]);o.show(e);this._fillPlaceholders(c);a.initWithComponents(d);this._setAttachmentSelectedClass(a.attachmentClassName);h.inform("composer/initializedAttachment",{composerRoot:this._root,isInitial:d})};a.prototype._showAttachmentAfterComponentsLoaded=function(a,b){"use strict";var c=this._attachments[a];n.waitForComponents(this._composerID,c.required_components,this._showAttachment.bind(this,c.instance,a,c.placeholders,b))};a.prototype._fillPlaceholders=function(a){"use strict";a.forEach(function(a){var b=n.get(this._composerID,a.component_name);b.element&&a.element!==b.element.parentNode&&p.setContent(a.element,b.element)}.bind(this))};a.prototype._setAttachmentSelectedClass=function(a){"use strict";var b=q.scry(this._root,"._519b")[0];b&&(o.removeClass(b,"_519b"),b=q.scry(b,'*[aria-pressed="true"]')[0],b&&b.setAttribute("aria-pressed","false"));if(a){a=q.scry(this._root,"."+a)[0];a&&(o.addClass(a,"_519b"),b=q.scry(a,'*[aria-pressed="false"]')[0],b&&b.setAttribute("aria-pressed","true"))}};a.prototype._augmentURI=function(a){"use strict";var b=this._context.getProperty(j.PROPERTIES.ACTOR_ID);b=b?g.create(a,b):new v(a);a=this._context.getProperty(j.PROPERTIES.POST_ID);a&&b.addQueryData("post_id",a);return b.toString()};Object.assign(a.prototype,{_endpointHashToShow:A,_currentFetchEndpoints:[],_initialAttachmentEndpoint:""});e.exports=a}),null);
__d("registerForLeaveWarning",["Run","URI","createCancelableFunction","fbt"],(function(a,b,c,d,e,f,g,h,i,j){__p&&__p();function b(a){var b=h.getNextURI(),c=i(a);g.onBeforeUnload(function(){return k(c,b)});return c}function k(b,c){__p&&__p();var d=h.getMostRecentURI(),e=h.getNextURI();d=Object.prototype.hasOwnProperty.call(d.getQueryData(),"theater")&&c.path===e.path;var f=Object.prototype.hasOwnProperty.call(e.getQueryData(),"theater");e=a.DialogNavigationStack&&a.DialogNavigationStack.isActiveURI(e);if(d||f||e){g.onAfterLoad(function(){g.onBeforeUnload(function(){return k(b,c)})});return}if(a.Dialog&&a.Dialog.getCurrent())return;if(b())return j._("You haven't finished your post yet. Do you want to leave without finishing?")}e.exports=b}),null);
__d("ComposerXController",["ActorURI","Arbiter","ComposerX","ComposerXAttachmentBootstrap","ComposerXContext","ComposerXMarauderLogger","Event","Parent","$","csx","emptyFunction","ge","invariant","registerForLeaveWarning"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){__p&&__p();var u={},v={},w={};function x(a){var b=r(a);if(!b)return null;b=n.bySelector(o(a),"._119");a=b.id;w[a]||(w[a]=new i(b));return w[a]}function y(a){a=x(a);a!==null||s(0);return a}function z(a){if(!v[a])return;v[a].forEach(function(a){return a.cancel()});delete v[a]}var A={registerConditionForComposerCancel:function(a,b){a=y(a).getID();a in u||(u[a]=[]);u[a].push(b);a in v||(v[a]=[]);v[a].push(t(b))},hasChanges:function(a){a=u[a];return!a?!1:a.some(function(a){return a()})},getAttachment:function(a,b,c,d){a=y(a);a.getAttachment(b,c,null,d)},fetchAttachmentData:function(a,b,c){y(a).fetchAttachmentData(b,c)},setAttachment:function(a,b,c,d,e){a=x(a);a&&a.setAttachment(b,c,d,e)},setInitialAttachment:function(a,b,c,d,e,f){a=y(a);a.setInitialAttachment(b,c,d,e,f)},setComponent:function(a,b,c){a=x(a);a&&a.setComponent(b,c)},reset:function(a){a=y(a);a.reset()},holdTheMarkup:q,getEndpoint:function(a,b,c){a=y(a);var d=a.getContext();b=g.create(b,d.getProperty(k.PROPERTIES.ACTOR_ID)).toString();j.load(a._attachmentFetchForm,b,c)},addPlaceholders:function(a,b,c){a=y(a);a.addPlaceholders(b,c)},hasAttachmentWithClassName:function(a,b){a=y(a);return a.hasAttachmentWithClassName(b)},showAttachmentThrobber:function(a){a=y(a);a.showAttachmentThrobber()},hideAttachmentThrobber:function(a){a=y(a);a.hideAttachmentThrobber()},logEventForElement:function(a,b){if(!n.bySelector(o(a),"._119"))return;m.listen(a,"click",function(){var c=A.getComposerID(a);l.logEvent(b,c)})},getComposerID:function(a){return y(a).getID()},destroyComposer:function(a){if(!(a in w))return;w[a].destroy();delete w[a];delete u[a];z(a)}};j.bootstrap=function(a){A.getAttachment(a,a.getAttribute("data-endpoint"))};h.subscribe("page_transition",function(){for(var a in w)r(a)||A.destroyComposer(a)});e.exports=A}),null);
__d("ComposerXAjaxEndpoint",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ADS_MEDIA_UPLOAD:"/ajax/ads/create/composerx/attachment/media/upload/",ADS_ATTACHMENT_STATUS:"/ajax/ads/create/composerx/attachment/status/",MEDIA_UPLOAD:"/ajax/composerx/attachment/media/upload/",VIDEO_UPLOAD:"/ajax/composerx/attachment/video/upload/"})}),null);
__d("isAnimatedGif",["Promise"],(function(a,b,c,d,e,f,g){__p&&__p();var h=1e6;function i(a){return a[0]===71&&a[1]===73&&a[2]===70}function j(a,b){return a[b]===0&&a[b+1]===33&&a[b+2]===249&&a[b+3]===4&&a[b+8]===0&&(a[b+9]===44||a[b+9]===33)}function k(a){if(!i(a))return!1;var b=0;for(var c=0;c+9<a.length;++c){j(a,c)&&b++;if(b>1)return!0}return!1}function a(a){__p&&__p();return new g(function(b){__p&&__p();var c=new FileReader();c.onloadend=function(a){if(a.target.readyState==FileReader.DONE){a=new Uint8Array(a.target.result);k(a)?b(!0):b(!1)}};c.onerror=function(a){b(!1)};var d=Math.min(h,a.size);d=a.slice(0,d);c.readAsArrayBuffer(d)})}e.exports=a}),null);
__d("ComposerXMediaUploadHandler",["Arbiter","AsyncRequest","ComposerXAjaxEndpoint","ComposerXController","CSS","Dialog","ImageExtensions","ReloadPage","SubscriptionsHandler","URI","VideoUploadConfig","VideoUploadFile","fbt","isAnimatedGif"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){__p&&__p();var u=i.MEDIA_UPLOAD,v="/ajax/composerx/attachment/video/upload/",w=0;function x(a,b){"use strict";this.$1=a,this.$2=b}x.prototype.fetchAttachments=function(){"use strict";[this.getPhotoUploadAttachmentEndpoint(),v].forEach(function(a){j.fetchAttachmentData(this.$1,a)}.bind(this))};x.prototype.handleFileSelected=function(a){"use strict";var b=this;x.isVideoOrAnimatedGifAsync(a,function(c){c?b.handleVideoSelected(a):b.handlePhotoSelected(a)})};x.canUploadAnimatedGIF=function(){"use strict";return m.GIF in q.videoExtensions};x.isVideoOrAnimatedGifAsync=function(a,b){"use strict";var c=r.getExtensionFromFileInput(a.getInput());x.canUploadAnimatedGIF()&&c===m.GIF?t(a.getInput().files[0]).then(b):q.videoExtensions[c]?b(!0):b(!1)};x.prototype.handleVideoSelected=function(a){"use strict";if(this.$2&&this.$2.imagesOnly){var b=new l().setModal(!0).setButtons([l.OK]);this.$2.isEditComposer?b.setTitle(s._("Can't add video")).setBody(s._("Sorry, you can't add a video to a post you're editing.")):b.setTitle(s._("Invalid Image File")).setBody(s._("Please upload a valid image file."));b.show();return}j.getAttachment(this.$1,v);g.inform("ComposerXFilesStore/filesAdded/"+this.$1+"/videoupload",{fileInput:a},g.BEHAVIOR_PERSISTENT)};x.prototype.handlePhotoSelected=function(a){"use strict";j.getAttachment(this.$1,this.getPhotoUploadAttachmentEndpoint()),x.$3(this.$1,a)};x.isVideoFile=function(a){"use strict";a=r.getExtensionFromFileInput(a.getInput());return!!q.videoExtensions[a]};x.prototype.$4=function(){"use strict";return this.$2?this.$2.photoUploadOverrideEndpoint:null};x.prototype.getPhotoUploadAttachmentEndpoint=function(){"use strict";var a=this.$4();return a?a:u};x.$3=function(a,b){"use strict";g.inform("ComposerXFilesStore/filesAdded/"+a+"/mediaupload",{fileInput:b,receivedBySubscriber:!1},g.BEHAVIOR_PERSISTENT)};x.setupFileUploadToComposerDialog=function(a,b,c,d){"use strict";__p&&__p();var e="composerxmediauploadhandler"+w++,f=function(b){k.conditionClass(a.getControl(),c,b),a.getInput().disabled=b},i=new p(b),j=i.getQueryData();j.client_ref=e;i.setQueryData(j);b=i.toString();a.subscribe("change",function(){new h().setURI(b).setErrorHandler(function(){a.clear(),f(!1)}).send(),f(!0)});g.subscribe("composer/dialog/"+e+"/new",function(b,c){this.$3(c.composerID,a);var e=new o();e.addSubscriptions(g.subscribe("composer/publish",function(event,a){d&&c.composerID===a.composer_id&&n.now()}),c.dialog.subscribe("hide",function(){e.release(),a.clear(),f(!1)}))}.bind(this))};e.exports=x}),null);
__d("TypeaheadShowResultsOnFocus",["Event","Keys"],(function(a,b,c,d,e,f,g,h){__p&&__p();function a(a){"use strict";this._typeahead=a}a.prototype.enable=function(){"use strict";this._typeahead.getCore().resetOnKeyup=!1,this._subscription=this._typeahead.subscribe("bootstrap",function(a,b){this.firstFetch(b,this._typeahead.getCore(),this._typeahead.getData())}.bind(this)),this._keyUpListener=g.listen(this._typeahead.getCore().getElement(),"keyup",function(event){(g.getKeyCode(event)==h.BACKSPACE||g.getKeyCode(event)==h.DELETE)&&this.respond(this._typeahead.getCore(),this._typeahead.getData())}.bind(this)),this._focusListener=g.listen(this._typeahead.getCore().getElement(),"focus",function(event){this.respond(this._typeahead.getCore(),this._typeahead.getData())}.bind(this))};a.prototype.disable=function(){"use strict";this._typeahead.unsubscribe(this._subscription),this._subscription=null,this._keyUpListener.remove(),this._keyUpListener=null,this._focusListener.remove(),this._focusListener=null};a.prototype.firstFetch=function(a,b,c){"use strict";a.bootstrapping||this.respond(b,c)};a.prototype.respond=function(a,b){"use strict";a.getValue()||this.refreshAndShowNeededResults(a,b)};a.prototype.refreshAndShowNeededResults=function(a,b){"use strict";var c=this.getUidsFromData(b);a.setValue("");a=b.buildUids(" ",c);b.respond("",a)};a.prototype.getUidsFromData=function(a){"use strict";a=a.getAllEntries();var b=[];for(var c in a)b.push({uid:a[c].uid,index:a[c].index});b.sort(function(a,b){return a.index-b.index});return b.map(function(a){return a.uid})};Object.assign(a.prototype,{_subscription:null,_keyUpListener:null,_focusListener:null});e.exports=a}),null);